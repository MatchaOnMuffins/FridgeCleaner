<!DOCTYPE html>
<html>
<head>
    <title>Barcode Scanner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
</head>
<body>
    <h1>Barcode Scanner</h1>
    <div id="scanner-container"></div>
    <div id="barcode-result">Scan a barcode to see the result.</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            Quagga.init({
                inputStream: {
                    name: "Live",
                    type: "LiveStream",
                    target: document.querySelector('#scanner-container'),
                    constraints: {
                        width: 640,
                        height: 480,
                        facingMode: "environment" // Use rear camera
                    },
                },
                decoder: {
                    readers: ["code_128_reader", "ean_reader", "ean_8_reader"]
                }
            }, (err) => {
                if (err) {
                    console.error(err);
                    return;
                }
                console.log("Quagga initialized.");
                Quagga.start();
            });

            Quagga.onDetected((data) => {
                const code = data.codeResult.code;
                console.log("Barcode detected:", code);
                document.getElementById('barcode-result').textContent = `Scanned Barcode: ${code}`;
                Quagga.stop(); // Stop scanning after detection
            });
        });
    </script>
</body>
</html>